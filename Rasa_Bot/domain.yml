session_config:
  session_expiration_time: 5 # these are minutes
  carry_over_slots_to_new_session: true

intents:
- confirm
- deny
- request_plan_week
- EXTERNAL_trigger_ask_foreseen_hrs
- completed_pa
- request_future_self_dialog
- request_tracked_cigarettes
- request_tracker_reminder

slots:
  
  ### User data
  # The user's age
  age:
    type: float
    min_value: 0.0
    max_value: 123.0
    initial_value: 0
    influence_conversation: false
    mappings:
    - type: custom
  # The user's name
  name:
    type: text
    initial_value: 'NAMENOTSET'
    influence_conversation: false
    mappings:
    - type: custom
  # ID of the user in current conversation
  sender_id:
    type: text
    initial_value: ''
    influence_conversation: false
    mappings:
    - type: custom


  ### Weekly planning
  # The plan for the week
  plan_week:
    type: text
    initial_value: ''
    influence_conversation: false
    mappings:
    - type: custom
  # Whether saving the weekly plan in the calendar succeeded
  success_save_calendar_plan_week:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom

  # Evaluate completed PA
  pa_evaluation_response:
    type: float
    influence_conversation: false
    mappings:
      - type: custom
        conditions:
          - active_loop: pa_evaluation_form
          

  ### Rescheduling query dialog
  # Whether the user wants to continue the dialog now
  rescheduling_now:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: rescheduling_now_or_later_form
  # List of rescheduling options
  rescheduling_options_list:
    type: list
    influence_conversation: false
    mappings:
    - type: custom
  # String with rescheduling options for uttering the options
  rescheduling_options_string:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  # Chosen rescheduling option in case user does not want to continue dialog now
  rescheduling_option:
    type: float
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: rescheduling_options_form
      
  ### First aid kit
  
  # Text of first aid kit to present to user
  first_aid_kit_text:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  # Whether the user has something in his/her first aid kit
  first_aid_kit_exists:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom

  ### Future-self dialog
  
  # Whether the user has done the first step before
  future_self_dialog_step_1_repetition:
    type: bool
    influence_conversation: false
    mappings:
    - type: custom
    
  # Chosen smoker words from previous time the dialog was done
  future_self_dialog_smoker_words_prev:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
    
  # Chosen mover words from previous time the dialog was done by the user
  future_self_dialog_mover_words_prev:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  
  picked_words:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: pick_smoker_words_form
      - active_loop: pick_mover_words_form

  why_picked_words:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
        - active_loop: why_picked_smoker_words_form
        - active_loop: why_picked_mover_words_form
        - active_loop: why_see_myself_as_smoker_form
        - active_loop: why_see_myself_as_mover_form

  see_myself_as_picked_words_smoker:
    type: float
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
        - active_loop: see_myself_as_smoker_form
        
  see_myself_as_picked_words_smoker_text:
     type: text
     influence_conversation: false
     mappings:
     - type: custom

  confirm_words_response:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
        - active_loop: confirm_words_form

  see_myself_as_picked_words_mover:
    type: float
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
        - active_loop: see_myself_as_mover_form
        
  see_myself_as_picked_words_mover_text:
     type: text
     influence_conversation: false
     mappings:
     - type: custom
     
  # Indicates parts of future self dialog finished by user in 
  # current conversation: 1, ...
  future_self_dialog_state:
     type: float
     influence_conversation: false
     mappings:
     - type: custom

 ### Data from custom tracker
  number_of_cigarettes:
    type: float
    initial_value: 0
    influence_conversation: false
    mappings:
    - type: custom

responses:
  # Fallback
  utter_default:
  - text: "Sorry, ik begrijp (nog) niet wat je bedoelt, kun je me het op een andere manier duidelijk maken?"

  # General
  utter_greet:
  - text: "Hey {name}!"
  - text: "Hi {name}!"
  - text: "Hallo {name}!"
  - text: "Hoi {name}!"
  utter_goodbye:
  - text: "Doei!"
  - text: "Tot straks!"
  - text: "Tot ziens!"


  # Weekly planning
  utter_plan_week:
  - text: "{plan_week} ..."
  utter_ask_plan_calendar:
  - text: "Zal ik de planning in je NiceDay agenda zetten?"
  - text: "Wil je dat ik de planning in je NiceDay agenda zet?"
  utter_plan_calendar_confirmation:
  - text: "Cool, ik heb de planning in je NiceDay agenda ingevoerd."
  - text: "Okay, de planning staat nu in je NiceDay agenda."
  utter_okay:
  - text: "Okay!"
  - text: "OK!"
  utter_error_save_plan_week_calendar:
  - text: "Sorry, ik kan de planning nu niet invoeren."

  
  ### Activity evaluation
  utter_pa_completed:
  - text: "Goed bezig! ..."
  utter_ask_pa_evaluation_form_pa_evaluation_response:
  - text: >
      Hoe ging het? Geef dit aan op een schaal
      van 1 tot 5, waarbij 1 zeer slecht en 5 zeer goed.
  utter_pa_evaluation_form_once_filled:
    - condition:
        - type: slot
          name: pa_evaluation_response
          value: 4 
      text: "Fijn om te horen dat het goed ging!"
    - condition:
        - type: slot
          name: pa_evaluation_response
          value: 5 
      text: "Fijn om te horen dat het goed ging!"
    - condition:
        - type: slot
          name: pa_evaluation_response
          value: 3
      text: "Jammer, probeer nu goed uit te rusten, dan gaat het de volgende keer vast beter!"
    - condition:
        - type: slot
          name: pa_evaluation_response
          value: 2
      text: "Jammer, probeer nu goed uit te rusten, dan gaat het de volgende keer vast beter!"
    - condition:
        - type: slot
          name: pa_evaluation_response
          value: 1
      text: "Jammer, probeer nu goed uit te rusten, dan gaat het de volgende keer vast beter!"
    - text: "Other value."

  ## Ask data from tracker
  utter_tracked_cigarettes:
    - text: "Je hebt vandaag {number_of_cigarettes} sigaretten gerookt."

  ### Foreseen HRSs smoking
  utter_ask_foreseen_hrs:
    - text: "Denk je dat je vandaag in een situatie komt waarin je trek krijgt in een sigaret?"
  utter_watering_plants:
    - text: "Als je hunkert naar een sigaret, kan het helpen om de plantjes water te geven"
  utter_be_careful_for_hrs:
    - text: "Wees voorzichtig, het kan zijn dat je onvoorzien alsnog in zo'n situatie komt. Ik ben hier om je te helpen"


  ### Re-prompts in forms
  utter_please_answer_1_2_3:
     - text: "Antwoord alsjeblieft met '1,' '2,' of '3.'"
  utter_please_answer_1_2_3_4:
     - text: "Antwoord alsjeblieft met '1,' '2,' '3,' of '4.'"
  utter_please_answer_1_to_5:
     - text: "Kun je een geheel getal tussen 1 en 5 opgeven? ..."
  utter_please_answer_yes_no:
     - text: "Geef alsjeblieft antwoord met 'ja' of 'nee'?"
  utter_please_answer_now_or_later:
     - text: "Geef alsjeblieft antwoord met 'nu' of 'later.'"
  utter_please_answer_more_words:
     - text: "Zou je dat in meer woorden kunnen omschrijven?"
  utter_did_not_understand:
     - text: "Hmm ik heb dat niet begrepen."
     

  ### First-aid kit
  utter_first_aid_kit:
      - text: "Hier is je EHBO doos:\n{first_aid_kit_text}."
  utter_first_aid_kit_empty:
      - text: "Je hebt niets in je EHBO doos.\nProbeer iets te bedenken waar je dankbaar voor bent."


  ### General rescheduling query dialog
  utter_ask_rescheduling_now_or_later_form_rescheduling_now:
     - text: "Wil jij deze oefening nu doen of later?"
  utter_user_chose_later:
     - text: "OK, het is wel goed als je deze oefening snel doet. Dit gaat je helpen je doelen te behalen. ..."
     - text: "Prima, dit is wel een belangrijke oefening die je snel moet doen. ..."
     - text: "Goed, laten we deze oefening later doen. ..."
  utter_ask_rescheduling_options_form_rescheduling_option:
     - text: "Wanneer komt het beter uit? {rescheduling_options_string} Geef antwoord met 1, 2, 3, of 4."
  utter_rescheduling_option_chosen:
     - text: "Prima, ik kom dan bij je terug."
  utter_user_chose_now:
     - text: "Super dat je er gelijk mee aan de slag gaat! ..."
     - text: "Leuk, laten we beginnen. ..."
     - text: "Mooi, we gaan aan de slag! ..."
     - text: "Goed bezig, deze activiteit gaat je helpen met je doelen. ..."


  ### Future-self dialog
  # Purpose: Define current self
  # Context: Preparation phase, one or two days (to be decided)
  # after deciding whether or not to use medication.
  # This activity is being repeated several times throughout the intervention.
  utter_future_self_intro:
    - text: "Vandaag gaan wij een leuke oefening doen die je gaat helpen te stoppen met roken en genoeg te bewegen. ..."
    - text: "We gaan nu aan de slag met een oefening om jou te helpen met stoppen met roken en genoeg laten bewegen. ..."
    - text: "Om jou te helpen om genoeg te bewegen en te laten stoppen met roken, gaan we nu een oefening doen. ..."
  # If this is not the first time the user does the first part of the dialog, we need to add some sentences.
  utter_future_self_intro_exercise_name:
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: false 
      text: "De oefening heet 'wie wil ik straks zijn.' ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "De oefening heet 'wie wil ik straks zijn.' Je hebt deze oefening al eens eerder gedaan. Juist door herhaling gaat deze oefening je helpen. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "De oefening heet 'wie wil ik straks zijn.' Door deze oefening te herhalen wordt het makkelijker je doelen te behalen. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "De oefening heet 'wie wil ik straks zijn.' Je hebt de oefening al een keer gedaan. Het wordt makkelijker je doelen te halen als je hem nog een keer doet. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "Deze oefening noemen we 'wie wil ik straks zijn.' Je hebt deze oefening al eens eerder gedaan. Juist door herhaling gaat deze oefening je helpen. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "Deze oefening noemen we 'wie wil ik straks zijn.' Door deze oefening te herhalen wordt het makkelijker je doelen te behalen. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "Deze oefening noemen we 'wie wil ik straks zijn.' Je hebt de oefening al een keer gedaan. Het wordt makkelijker je doelen te halen als je hem nog een keer doet. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "De naam van de oefening is 'wie wil ik straks zijn.' Je hebt deze oefening al eens eerder gedaan. Juist door herhaling gaat deze oefening je helpen. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "De naam van de oefening is 'wie wil ik straks zijn.' Door deze oefening te herhalen wordt het makkelijker je doelen te behalen. ..."
    - condition:
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true 
      text: "De naam van de oefening is 'wie wil ik straks zijn.' Je hebt de oefening al een keer gedaan. Het wordt makkelijker je doelen te halen als je hem nog een keer doet. ..."
  utter_future_self_duration:
    - text: "Het duurt ongeveer 15 minuten. ..."
    - text: "Het zal ongeveer 15 minuten duren. ..."
    - text: "Je gaat ongeveer 15 minuten bezig zijn. ..."
  utter_future_self_duration_do_at_once:
    - text: "Het is belangrijk dat je de oefening in een keer afmaakt. ..."
    - text: "Het is belangrijk om de oefening in één keer af te maken. ..."
  utter_future_self_explanation:
    - text: "Deze oefening gaat je op weg helpen om te stoppen met roken en genoeg te bewegen.
             We lopen samen door de volgende stappen:\n
             Eerst denk je na over jezelf op dit moment.
             Dan denk je na over jezelf over een paar maanden.
             Daarna stel ik jou een aantal vragen hierover.\n
             Geen stress, ik loop er stap voor stap met je doorheen. ...
            "
  utter_current_smoker:
    - condition: 
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: false
      text: "Eerst kijken wij wat voor roker jij op dit moment bent.
             Ik laat je zo een lijst met woorden zien.\n
             Welke woorden passen bij jou als roker?\n
             Roken is ...
            "
    - condition: 
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true
      text: "Eerst kijken wij wat voor roker jij op dit moment bent.\n
             De vorige keer zei je dit over roken: {future_self_dialog_smoker_words_prev}.
             Hoe kijk je er nu tegenaan?\n
             Roken is ...
            "
    - condition: 
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true
      text: "We gaan nu eerst kijken naar wat voor roker jij op dit moment bent.\n
             De vorige keer zei je dit over roken: {future_self_dialog_smoker_words_prev}.
             Hoe kijk je er nu tegenaan?\n
             Roken is ...
            "
    - condition: 
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true
      text: "We beginnen met wat voor roker jij op dit moment bent.\n
             De vorige keer zei je dit over roken: {future_self_dialog_smoker_words_prev}.
             Hoe kijk je er nu tegenaan?\n
             Roken is ...
            "
  utter_intro_current_mover:
    - text: "We gaan nu dezelfde oefening doen voor bewegen. ..."
    - text: "Voor bewegen gaan we nu dezelfde oefening doen. ..."
    - text: "We herhalen deze oefening voor bewegen. ..."
  utter_current_mover:
    - condition: 
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: false
      text: "Welke woorden vind jij passen bij bewegen?\n
             Bewegen is ...
            "
    - condition: 
        - type: slot
          name: future_self_dialog_step_1_repetition
          value: true
      text: "Welke woorden vind jij passen bij bewegen?\n
             De vorige keer zei je dit over bewegen: {future_self_dialog_mover_words_prev}.
             Hoe kijk je er nu tegenaan?\n
             Bewegen is ...
            "
  utter_smoking_word_list:
    - text: "Fijn - lekker - eng - past bij mij- plezierig - belonend - stressvol
             - moet ik doen - helpt mij - bedreigend - helpt mij ontspannen - vermoeiend
             - cool - iets wat ik wil blijven doen - onderdeel van mijn leven - vies
             - prettig - gevaarlijk - verslavend - belangrijk - niet belangrijk
             - hoort niet bij mij - stom - stoer - gezellig - duur - sexy
             - ongezond - niet zo heel erg ...
            "
  utter_moving_word_list:
    - text: "Fijn - lekker - past bij mij - plezierig - belonend - geen zin in
             - helpt mij ontspannen - vermoeiend - cool
             - onderdeel van mijn leven - prettig - belangrijk - niet belangrijk
             - hoort niet bij mij - stom - goed - gezellig - kost tijd
             - stressvol - helpt mij - iets wat ik meer wil doen
             - vind ik niet leuk - vind ik leuk - doet pijn - gezond
             - moet voor mijn gezondheid - makkelijk - doe ik veel - straf
             - gaat niet - lastig - houdt mij jong - eng ..."
  utter_ask_pick_smoker_words_form_picked_words:
    - text: "Kies 3 tot 5 woorden uit de lijst en typ ze in de chat."
  utter_ask_pick_mover_words_form_picked_words:
    - text: "Kies 3 tot 5 woorden uit de lijst en typ ze in de chat."
  utter_picked_smoker_words:
    - text: "Deze woorden passen bij jou als roker: {picked_words}, klopt dat?"
  utter_picked_mover_words:
    - text: "{picked_words} heb jij gekozen, klopt dat?"
  utter_ask_why_picked_smoker_words_form_why_picked_words:
    - text: "Waarom heb je deze woorden gekozen voor roken?"
  utter_back_channel_good:
    - text: "Mooi. ..."
    - text: "Duidelijk. ..."
  utter_ask_why_picked_mover_words_form_why_picked_words:
    - text: "Waarom heb je deze woorden gekozen voor bewegen?"
  utter_why_picked_words_response:
    - text: "Goed dat je hier zo over na kunt denken. ..."

  utter_self_view_intro:
    - text: "Nu krijg je twee zinnen te zien.
             Vul ze aan met wat het meest bij jou past en typ het nummer in de chat. ..."
  utter_see_myself_as_smoker_options:
    - text: "Ik zie mijzelf als...
             een roker (1) - een niet-roker (2) - iemand die stopt met roken (3)."
  utter_see_myself_as_mover_options:
    - text: "Ik zie mijzelf als...
             lichamelijk actief (1) - een beetje lichamelijk actief (2) - niet lichamelijk actief (3). ..."
  utter_ask_see_myself_as_mover_form_see_myself_as_picked_words_mover:
    - text: "Kies de optie die het meeste bij je past en typ het nummer in de chat."
  utter_see_myself_as_picked_smoker_words:
    - text: "{see_myself_as_picked_words_smoker} heb jij gekozen, klopt dat?"
  utter_see_myself_as_picked_mover_words:
    - text: "{see_myself_as_picked_words_mover} heb jij gekozen, klopt dat?"
  utter_thank_user_for_response:
    - text: "Helder, bedankt."
  utter_leuk:
    - text: "Leuk! ..."
  utter_fijn:
    - text: "Fijn! ..."
  utter_ask_why_see_myself_as_smoker_form_why_picked_words:
    - text: "Leg uit, waarom zie jij jezelf als {see_myself_as_picked_words_smoker_text}?"
  utter_ask_why_see_myself_as_mover_form_why_picked_words:
    - text: "En waarom zie jij jezelf als {see_myself_as_picked_words_mover_text}?"
  utter_close_future_self_step_1:
    - text: "Heldere antwoorden. Dankje voor het delen.
             We gaan door met nieuwe oefeningen."
  utter_try_again:
    - text: "Oke laten we het opnieuw proberen. ..."
  utter_try_again_see_myself_mover:
    - text: "Oke laten we het nog een keer proberen. ..."
  utter_reminder_is_set:
    - text: "The reminder is set. ..."
    
actions:
- action_get_plan_week
- action_get_age_from_database
- action_get_name_from_database
- action_save_plan_week_calendar
- action_set_reminder
- validate_pa_evaluation_form
- action_store_pa_evaluation
### Future self dialog
- action_get_future_self_repetition_from_database
- action_store_smoker_words
- action_store_mover_words
- action_store_why_smoker_words
- action_store_why_mover_words
- action_store_see_myself_as_picked_smoker_words
- action_store_see_myself_as_picked_mover_words
- validate_confirm_words_form
- action_reset_confirm_words_response_slot_smoking
- action_reset_confirm_words_response_slot_pa
- action_reset_picked_words_slot
- action_reset_why_picked_words_slot_smoking
- action_reset_why_picked_words_slot_pa
- validate_see_myself_as_smoker_form
- validate_see_myself_as_mover_form
- action_reset_see_myself_as_picked_words_mover
- action_reset_see_myself_as_picked_words_smoker
- action_map_see_myself_as_picked_words_mover
- action_map_see_myself_as_picked_words_smoker
- validate_why_picked_mover_words_form
- validate_why_picked_smoker_words_form
- action_store_future_self_dialog_state
- action_set_future_self_dialog_state_step_1
### Rescheduling query dialog
- validate_rescheduling_now_or_later_form
- action_reset_rescheduling_now_slot
- action_get_rescheduling_options_list
- validate_rescheduling_options_form
- action_reset_rescheduling_option_slot
### Data from custom tracker
- action_save_number_cigarettes
- action_get_number_cigarettes
- action_set_cigarettes_tracker_reminder
### First aid kit
- action_get_first_aid_kit


forms:
  pa_evaluation_form:
    required_slots:
      - pa_evaluation_response
  pick_smoker_words_form:
    required_slots:
      - picked_words
  confirm_words_form:
    required_slots:
      - confirm_words_response
  pick_mover_words_form:
    required_slots:
      - picked_words
  why_picked_smoker_words_form:
    required_slots:
      - why_picked_words
  why_picked_mover_words_form:
    required_slots:
      - why_picked_words
  see_myself_as_smoker_form:
    required_slots:
      - see_myself_as_picked_words_smoker
  see_myself_as_mover_form:
    required_slots:
      - see_myself_as_picked_words_mover
  why_see_myself_as_smoker_form:
    required_slots:
      - why_picked_words
  why_see_myself_as_mover_form:
    required_slots:
      - why_picked_words
  ### Rescheduling query dialog
  rescheduling_now_or_later_form:
    required_slots:
      - rescheduling_now
  rescheduling_options_form:
    required_slots:
      - rescheduling_option
