version: "3.0"
stories:
- story: Get weekly planning, user initiated
  steps: 
  - user: | 
      Mag ik de planning?
    intent: request_plan_week
  - action: action_get_age_from_database
  - action: action_get_plan_week
  - action: utter_plan_week
  - action: utter_ask_plan_calendar
  - user: |
      Nee
    intent: deny
  - action: utter_okay

- story: Ask foreseen HRS, user does not foresee HRS
  steps:
  - intent: EXTERNAL_trigger_ask_foreseen_hrs
  - action: utter_ask_foreseen_hrs
  - user: |
      Nee
    intent: deny
  - action: utter_be_careful_for_hrs


- story: handle confirm picked smoker words
  steps:
  - checkpoint: check_picked_smoker_words
  - action: confirm_words_form
   - user: |
       ja
    intent: confirm
  - active_loop: confirm_words_form
  - slot_was_set:
    - confirm_words_response: true
  - active_loop: null
  - action: action_reset_picked_words_slot
  - action: why_picked_smoker_words_form
  - active_loop: why_picked_smoker_words_form
  - slot_was_set:
    - has_enough_words: true
  - active_loop: null  # TODO: store slot in database
  - action: utter_why_picked_words_response
    # This is where the confidence first drops to about 0.5
  - action: action_reset_confirm_words_response_slot
  - action: action_reset_has_enough_words_slot
  - checkpoint: finished_check_picked_smoker_words


- story: handle confirm picked mover words
  steps:
  - checkpoint: check_picked_mover_words
  - action: confirm_words_form
  - user: |
       ja
    intent: confirm
  - active_loop: confirm_words_form
  - slot_was_set:
    - confirm_words_response: true
  - active_loop: null
  - action: action_reset_picked_words_slot
  - action: why_picked_mover_words_form
  - active_loop: why_picked_mover_words_form
  - slot_was_set:
    - has_enough_words: true
  - active_loop: null
  - action: utter_why_picked_words_response
  - action: action_reset_has_enough_words_
  - action: action_reset_confirm_words_response_slot
  - checkpoint: finished_check_picked_mover_words

# - story: Test handle confirm picked smoker words
#   steps:
#     - action: confirm_words_form
#     - user: |
#         ja
#       intent: confirm
#     - active_loop: confirm_words_form
#     - slot_was_set:
#       - confirm_words_response: true
#     - active_loop: null
#     - action: why_picked_smoker_words_form
#     - user: |
#         Ik heb gezoken deze woorden omdat ze zijn wat ik denk!
#     - active_loop: why_picked_smoker_words_form
#     - slot_was_set:
#       - has_enough_words: true
#     - active_loop: null
#     - action: utter_why_picked_words_response
#     - user: |
#         Alstublieft!
#     - action: action_reset_confirm_words_response_slot
#     - action: action_reset_has_enough_words_slot

# - story: Test handle confirm picked mover words
#   steps:
#   - action: confirm_words_form
#   - user: |
#       ja
#     intent: confirm
#   - active_loop: confirm_words_form
#   - slot_was_set:
#     - confirm_words_response: true
#   - active_loop: null
#   - action: action_reset_picked_words_slot
#   - action: why_picked_mover_words_form
#   - user: |
#       Ik heb gezoken deze woorden omdat ze zijn wat ik denk!
#   - active_loop: why_picked_mover_words_form
#   - slot_was_set:
#     - has_enough_words: true
#   - active_loop: null
#   - action: utter_why_picked_words_response
#   - user: |
#       AUB!
#   - action: action_reset_has_enough_words_slot
#   - action: action_reset_confirm_words_response_slot
