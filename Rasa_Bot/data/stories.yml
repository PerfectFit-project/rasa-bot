version: "2.0"

stories:

- story: request_plan_week_calendarYes
  steps:
  - intent: request_plan_week
  - action: action_get_plan_week
  - action: utter_plan_week
  - action: utter_ask_plan_calendar
  - intent: confirm
  - action: action_save_plan_week_calendar
  - slot_was_set:
    - success_save_calendar_plan_week: True
  - action: utter_plan_calendar_confirmation
  
# saving in calendar failed
- story: request_plan_week_calendarYes_Error
  steps:
  - intent: request_plan_week
  - action: action_get_plan_week
  - action: utter_plan_week
  - action: utter_ask_plan_calendar
  - intent: confirm
  - action: action_save_plan_week_calendar
  - slot_was_set:
    - success_save_calendar_plan_week: False
  - action: utter_error_save_plan_week_calendar
  
# User does not want to save plan in calendar
- story: request_plan_week_calendarNo
  steps:
  - intent: request_plan_week
  - action: action_get_plan_week
  - action: utter_plan_week
  - action: utter_ask_plan_calendar
  - intent: deny
  - action: utter_okay
      
# User asks agent how he/she is doing, and agent asks back
- story: user_asks_agent_mood
  steps:
  - intent: how_are_you
  - action: utter_agent_mood
  - action: utter_ask_back
  - checkpoint: user_mood_response
  
# when user says hello, we say hello back and ask about the user's mood
- story: user_hello
  steps:
  - intent: greeting
  - action: action_get_sender_id_from_tracker
  - action: action_get_name_from_database
  - action: utter_greet
  - action: utter_ask_user_mood
  - checkpoint: user_mood_response

# user has a positive mood
- story: user_positive_mood
  steps:
  - checkpoint: user_mood_response
  - intent: positive_mood
  - action: utter_response_mood_positive

# user has a negative mood
- story: user_negative_mood
  steps:
  - checkpoint: user_mood_response
  - intent: negative_mood
  - action: utter_response_mood_negative

# User indicates completion PA
- story: user_indicate_pa
  steps:
  - intent: completed_pa
  - action: utter_pa_completed
  - action: pa_evaluation_form
  - active_loop: pa_evaluation_form
  - action: action_pa_likert_form_filled