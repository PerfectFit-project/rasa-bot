version: "3.1"

rules:
- rule: start preparation phase
  steps:
    - intent: test_intent
    - action: action_set_slot_previous_dialog
    - action: utter_finished_preparation_phase
    - action: utter_next_part
    - action: action_expected_time_next_part
    - action: next_part_now_or_later_form
    - active_loop: next_part_now_or_later_form
  wait_for_user_input: false

- rule: User has time now

  condition:
  - active_loop: next_part_now_or_later_form
  steps:
    - action: next_part_now_or_later_form
    - active_loop: null
    - slot_was_set:
        - video_clear_option: 1
    - action: utter_lets_start
    - action: action_end_dialog

- rule: User wants to do it later

  condition:
    - active_loop: next_part_now_or_later_form
  steps:
    - action: next_part_now_or_later_form
    - active_loop: null
    - slot_was_set:
      - video_clear_option: 2
    - action: utter_preparation_delay_warning

