# Niceday API Server

## Overview
This server currently has one POST endpoint `messages` that allows for sending a message
from the therapist account to a user in the Niceday app.

This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project.  By using the [OpenAPI-Spec](https://github.com/OAI/OpenAPI-Specification) from a remote server, you can easily generate a server stub.

### Setup
1. Install npm and node-js, following [these instructions](https://www.npmjs.com/get-npm).
2. Install dependencies: Run `npm install`.
3. Create a file called `.env` in this folder
Set THERAPIST_EMAIL_ADDRESS and THERAPIST_PASSWORD in your `.env` file, see .env-example.
These will be loaded as environment variables and will thus be available in the app.
You will get a `InvalidUsernamePasswordError` if the username or password is invalid.

### Running the server
To run the server, run:

```
npm start
```

To view the Swagger UI interface:

```
open http://localhost:8080/docs
```

From there you can easily test out the different endpoints

### Running with docker
Run the following commands:
```
./script/bootstrap
docker build -t niceday-api .
docker run --env-file .env niceday-api
```

See [root README](../README.md) for instructions of running
the full application with docker-compose.

### What is my user id?
Just run `node login.mjs emailaddress password` with a user's credentials to find out the user id.

This project leverages [oas3-tools](https://www.npmjs.com/package/oas3-tools) middleware which does most all the work.
